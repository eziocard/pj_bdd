<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel = "stylesheet" href="./css/estilos_hp.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <div class="menu">
        <div id="formulario">
            <h2>Hacer Prestamo</h2>

            <form action="cons_hacer_prestamo/prestamo.php" method="post" id = "hacer_prestamo">
                <div id= "formulario_f">
                <label for="rut">Rut: </label>
                <input type="text" id="rut" name="rut">
                </div>
                <div id= "formulario_f">
                <label for="fecha">seleccionar plazo maximo: </label>
                <input type="date" id="fecha" name="fecha">
                 </div>
                <div id= "formulario_f">
                <label for="id_ejemplar">Ingresar id del ejemplar: </label>
                <input type="text" id="id_ejemplar" name="id_ejemplar">
                </div>
                <button type ="submit">Hacer prestamo</button>


              </form>
            <div id = "resultado1"></div>
        </div>
        <div id = "buscar_libro">
            <h2>Seleccionar Libro</h2>
            <div id = "buscar_libro_f">
                <form action="cons_hacer_prestamo/buscar_libro.php" id = "bs_libro">
                    <label for="Buscar">Ingresar titulo</label>
                    <input type="text" name = "titulo">
                    <button type= "submit">Buscar</button>
                </form>

                <form action="cons_hacer_prestamo/m_t_libros.php" id = "m_libros">
                    <button type= "submit">Mostrar Disponibles</button>
                </form>
            </div>
            <div id="resultado2"> </div>
        </div>

        <script>
             $(function() {
                $('#m_libros').submit(function(e) {
                    e.preventDefault(); 
                    var datos = $(this).serialize();
                    $.ajax({
                        type: 'POST',
                        url: 'cons_hacer_prestamo/m_t_libros.php', 
                        data: datos,
                        success: function(response) {
                            $('#resultado2').html(response); 
                        }
                    });
                });
            });

            $('#bs_libro').submit(function(e) {
                e.preventDefault();

                var titulo = $('#bs_libro input[name=titulo]').val().trim(); 
                if (titulo === '') {
                    alert('Por favor ingresa el t√≠tulo del libro.');
                    return; 
}
                var datos = $(this).serialize();

                $.ajax({
                    type: 'POST',
                    url: 'cons_hacer_prestamo/buscar_libro.php',
                    data: datos,
                    success: function(response) {
                        $('#resultado2').html(response);
                    }
                });
            });
            $('#hacer_prestamo').submit(function(e) {
                e.preventDefault()
                var datos = $(this).serialize();

                $.ajax({
                    type: 'POST',
                    url: 'cons_hacer_prestamo/prestamo.php',
                    data: datos,
                    success: function(response) {
                        $('#resultado1').html(response);
                    }
                });
            });
        </script>
</div>


</body>
</html>